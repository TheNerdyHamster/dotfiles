# Set up the prompt
# autoload -Uz promptinit
# promptinit
# prompt adam1

# Enable colors
autoload -U colors && colors

# SSH Agent
#eval $(ssh-agent -s)

# Disable beep
unsetopt beep


# Use vim keybindings
bindkey -v

# Keep 1000 lines of history within the shell and save it to ~/.zsh_history:
HISTSIZE=1000
SAVEHIST=1000
HISTFILE=~/.zsh_history
setopt histignorealldups 
#setopt sharehistory

## Exports
export LANG=en_US.UTF-8
export EDITOR=nvim
export VISUAL=nvim
export GPG_TTY=`tty`

# Use modern completion system
autoload -Uz compinit
compinit

zstyle ':completion:*' auto-description 'specify: %d'
zstyle ':completion:*' completer _expand _complete _correct _approximate
zstyle ':completion:*' format 'Completing %d'
zstyle ':completion:*' group-name ''
zstyle ':completion:*' menu select=2
eval "$(dircolors -b)"
zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' list-colors ''
zstyle ':completion:*' list-prompt %SAt %p: Hit TAB for more, or the character to insert%s
zstyle ':completion:*' matcher-list '' 'm:{a-z}={A-Z}' 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=* l:|=*'
zstyle ':completion:*' menu select=long
zstyle ':completion:*' select-prompt %SScrolling active: current selection at %p%s
zstyle ':completion:*' use-compctl false
zstyle ':completion:*' verbose true

zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([0-9]#)*=0=01;31'
zstyle ':completion:*:kill:*' command 'ps -u $USER -o pid,%cpu,tty,cputime,cmd'

# ALIASES

# Terminal
alias c='clear'
alias ping='ping -c 5'
alias szsh='source ~/.zshrc'

# Vim
alias vi='nvim'
alias vim='nvim'

# Navigation
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

# Changing "ls" to "exa"
alias ls='exa --icons --color=always --group-directories-first' # my preferred listing
alias la='exa -a  --icons --color=always --group-directories-first'  # all files and dirs
alias ll='exa -l  --icons --color=always --group-directories-first'  # long format
alias lla='exa -al --icons --color=always --group-directories-first'  # long format
alias lt='exa -aT --icons --color=always --group-directories-first' # tree listing

# pacman and paru
alias pacsyu='doas pacman -Syyu'                 # update only standard pkgs
alias parsua='paru -Sua --noconfirm'              # update only AUR pkgs
alias parsyu='paru -Syu --noconfirm'              # update standard pkgs and AUR pkgs
alias unlock='doas rm /var/lib/pacman/db.lck'    # remove pacman lock
alias cleanup='doas pacman -Rns $(pacman -Qtdq)'  # remove orphaned packages

# Utils
alias myip='curl http://ipecho.net/plain; echo'
alias ports='netstat -tulanp'
alias sm='maim -s -u | xclip -selection clipboard -t image/png -i'

# Flags
alias free='free -m'
alias rm='rm -I'

# Get top process eating memory
alias psmem='ps auxf | sort -nr -k 4'
alias psmem10='ps auxf | sort -nr -k 4 | head -10'

## Colors in less and man pages
# Start blinking
export LESS_TERMCAP_mb=$(tput bold; tput setaf 4) # Blue
# Start bold
export LESS_TERMCAP_md=$(tput bold; tput setaf 4) # Blue
# Start standout
export LESS_TERMCAP_so=$(tput bold; tput rev; tput setaf 6) # Cyan
# End standout
export LESS_TERMCAP_se=$(tput rmso; tput sgr0)
# Start underline
export LESS_TERMCAP_us=$(tput smul; tput bold; tput setaf 5) # Magenta
# End bold, blinking, standout, underline
export LESS_TERMCAP_me=$(tput sgr0)

# Starship
eval "$(starship init zsh)"
